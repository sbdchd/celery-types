# Kombu stubtest allowlist
# ========================

# -----------------------------------------------------------------------------
# Optional transports / extensions
# -----------------------------------------------------------------------------

# librabbitmq is a legacy optional C extension.
kombu.transport.librabbitmq

# gcpubsub.Transport.channel_errors has a complex runtime type that's
# a dynamically constructed tuple of exception classes from google-cloud-pubsub.
# We simplify this to tuple[type[Exception], ...] in the stub.
kombu.transport.gcpubsub.Transport.channel_errors

# -----------------------------------------------------------------------------
# @functools.total_ordering generated methods (Python 3.10 only)
# -----------------------------------------------------------------------------
# These comparison methods are generated by @total_ordering and have an
# internal NotImplemented=NotImplemented parameter in Python 3.10.

kombu.asynchronous.timer.Entry.__ge__
kombu.asynchronous.timer.Entry.__gt__
kombu.asynchronous.timer.Entry.__le__

# -----------------------------------------------------------------------------
# Lock type mismatches (Python < 3.13)
# -----------------------------------------------------------------------------
# threading.Lock was a factory function (allocate_lock) until Python 3.13,
# where it became a proper class. The stub types Lock as a class to match
# typeshed and user expectations for type annotations.

kombu.clocks.LamportClock.__init__

# -----------------------------------------------------------------------------
# Not yet released in kombu
# -----------------------------------------------------------------------------
# reprkwargs is fixed in kombu main but not released yet (kombu 5.6.2).
# Remove this entry once kombu releases a version with the fix.
kombu.utils.reprkwargs
